<div *ngIf="config" class="p-4">
  <app-breadcrumb [items]="config.breadCrumbs"></app-breadcrumb>
  <div class="page-title">{{ config.title }}</div>
  <div *ngIf="form">
    <form [formGroup]="form">
      <section
        *ngFor="let section of config.sections"
        class="section-card mb-4"
      >
        <div class="card-header accordian" (click)="toggleSection(section)">
          <div class="text-md font-semibold">{{ section.title }}</div>
          <span
            class="accordion-toggle-icon"
            [class.expanded]="sectionState.get(section.title)"
          ></span>
        </div>

        <div
          class="accordion-content"
          [class.expanded]="sectionState.get(section.title)"
        >
          <div class="accordion-content-inner">
            <div
              *ngFor="let subsection of section.subsections"
              class="form-section"
            >
              <p
                class="text-base text-primary font-semibold mb-lg"
                *ngIf="subsection.title"
              >
                {{ subsection.title }}
              </p>

              <div class="row gy-4 gx-5">
                <div *ngFor="let field of subsection.fields" class="col-4 ps-0">
                  <label [for]="field.name" class="form-label required">{{
                    field.label
                  }}</label>
                  <app-form-field
                    [field]="field"
                    [form]="form"
                  ></app-form-field>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </form>
  </div>
</div>
